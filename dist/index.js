"use strict";Object.defineProperty(exports, "__esModule", {value: true}); function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }var ut=Object.defineProperty;var Pe=Object.getOwnPropertySymbols;var ft=Object.prototype.hasOwnProperty,dt=Object.prototype.propertyIsEnumerable;var ke=(e,t,r)=>t in e?ut(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Ce=(e,t)=>{for(var r in t||(t={}))ft.call(t,r)&&ke(e,r,t[r]);if(Pe)for(var r of Pe(t))dt.call(t,r)&&ke(e,r,t[r]);return e};var _react = require('react'); var _react2 = _interopRequireDefault(_react);var mt=e=>{let t=null;switch(e){case 0:t="Jan";break;case 1:t="Feb";break;case 2:t="Mar";break;case 3:t="Apr";break;case 4:t="May";break;case 5:t="Jun";break;case 6:t="Jul";break;case 7:t="Aug";break;case 8:t="Sep";break;case 9:t="Oct";break;case 10:t="Nov";break;case 11:t="Dec";break;default:t="Jan"}return t},de=mt;var pt=e=>{let t=null;switch(e){case 0:t="Mon";break;case 1:t="Tue";break;case 2:t="Wed";break;case 3:t="Thu";break;case 4:t="Fri";break;case 5:t="Sat";break;case 6:t="Sun";break;default:t="Mon"}return t},me=pt;var gt=({windowTime:e,tick:t,contentWidth:r,blockWidth:n})=>{let{dayBlocks:o,hourBlocks:i}=_react.useMemo.call(void 0, ()=>{let s=e[0],a=[],f=[];if(t===null||r===null)return{dayBlocks:[],hourBlocks:[]};let h=r,l=1;for(;;){let d=new Date(s*1e3),_=new Date(d.getFullYear(),d.getMonth(),d.getDate(),23,59,59),m=(_.getTime()-d.getTime())/1e3/t;if(h-=m,Math.round(h)<0){let u=Math.round((m+h)/n);for(let v=0;v<u;v++)f.push(_react2.default.createElement("div",{className:"hour-block",key:`${d.getDate()}_hour_${v}`},v<10?`0${v}:00`:`${v}:00`));a.push(_react2.default.createElement("div",{className:"day-block",key:`${d.getDate()} ${d.getMonth()}`,style:{gridColumn:`${l} / ${l+u}`}},me(d.getDay())," ",d.getDate()," ",de(d.getMonth()))),l+=u;break}let b=Math.round(m/n);for(let u=24-b;u<24;u++)f.push(_react2.default.createElement("div",{className:"hour-block",key:`${d.getDate()}_hour_${u}`},u<10?`0${u}:00`:`${u}:00`));if(a.push(_react2.default.createElement("div",{className:"day-block",key:`${d.getDate()} ${d.getMonth()}`,style:{gridColumn:`${l} / ${l+b}`}},me(d.getDay())," ",d.getDate()," ",de(d.getMonth()))),l+=b,Math.round(h)===0)break;s=(_.getTime()+1e3)/1e3}return{dayBlocks:a,hourBlocks:f}},[t,e,r]);return{dayBlocks:o,hourBlocks:i}},ze=gt;var bt=({windowTime:e,contentWidth:t})=>{let r=_react.useMemo.call(void 0, ()=>(e[1]-e[0])/3600,[e]),n=t?t/r:0;return{numberOfHourBlocks:r,blockWidth:n}},te=bt;var wt=({windowTime:e,tick:t,contentWidth:r,scrollWidth:n,additionalClassNames:o})=>{let i=_react.useRef.call(void 0, null),{blockWidth:s}=te({windowTime:e,contentWidth:r}),{dayBlocks:a,hourBlocks:f}=ze({windowTime:e,tick:t,contentWidth:r,blockWidth:s}),h=o!=null&&o.timeBar?"time-bar "+o.timeBar:"time-bar",l=o!=null&&o.dayRow?"day-row "+o.dayRow:"day-row",d=o!=null&&o.hourRow?"hour-row "+o.hourRow:"hour-row";return _react2.default.createElement("div",{className:h},_react2.default.createElement("div",{className:"empty-block"}),_react2.default.createElement("div",{className:"time-content",ref:i,style:{minWidth:r||0}},_react2.default.createElement("div",{className:l,style:{gridTemplateColumns:`repeat(auto-fill, minmax(${s}px, 1fr))`}},a.map(_=>_)),_react2.default.createElement("div",{className:d,style:{gridTemplateColumns:`repeat(auto-fill, minmax(${s}px, 1fr))`}},f.map(_=>_))),n?_react2.default.createElement("div",{style:{width:n,height:"100%",boxSizing:"border-box",borderLeft:"1px solid yellow"}}):null)},He=wt;var O=_react.createContext.call(void 0, null);var Tt=({name:e,id:t})=>{let r=_react.useContext.call(void 0, O),n=r&&r.rowsHeight&&r.rowsHeight[t]?r.rowsHeight[t].minHeight:40;return _react2.default.createElement("div",{className:"row-header",style:{minHeight:n}},e)},Oe=Tt;var Rt=({rows:e,className:t})=>{let r=t?"rows-header-wrapper "+t:"rows-header-wrapper";return _react2.default.createElement("div",{className:r},e.map(n=>_react2.default.createElement(Oe,{key:`row_header_${n.id}`,id:n.id,name:n.name})))},Le=Rt;var Dt=({contentWidth:e,cellWidth:t,lineClassName:r})=>{let n=_react.useMemo.call(void 0, ()=>{let i=[],s=r?"line "+r:"line";if(e)for(let a=t;a<e;a=a+t)i.push(_react2.default.createElement("div",{key:`line_${a}`,className:s}));return i},[t,e]),o=_react.useMemo.call(void 0, ()=>e?e-n.length*t:0,[e,t,n]);return _react2.default.createElement("div",{className:o<1?"lines-canvas hide-last-line":"lines-canvas",style:o<1?{gridTemplateColumns:`repeat(auto-fill, minmax(${t}px, 1fr))`}:{gridTemplateColumns:`repeat(auto-fill, minmax(${o}px, ${t}px))`}},n)},Fe=Dt;var St=({id:e,startPosition:t,width:r,top:n,height:o})=>_react2.default.createElement("div",{id:`static_event_${e}`,key:`static_event_${e}`,className:"static-event",onDrop:i=>i.stopPropagation(),style:{left:t,width:r,top:n,minHeight:o}}),$e=St;var Xe=Symbol.for("immer-nothing"),Be=Symbol.for("immer-draftable"),P=Symbol.for("immer-state"),Pt=process.env.NODE_ENV!=="production"?[function(e){return`The plugin for '${e}' has not been loaded into Immer. To enable the plugin, import and call \`enable${e}()\` when initializing your application.`},function(e){return`produce can only be called on things that are draftable: plain objects, arrays, Map, Set or classes that are marked with '[immerable]: true'. Got '${e}'`},"This object has been frozen and should not be mutated",function(e){return"Cannot use a proxy that has been revoked. Did you pass an object from inside an immer function to an async process? "+e},"An immer producer returned a new value *and* modified its draft. Either return a new value *or* modify the draft.","Immer forbids circular references","The first or second argument to `produce` must be a function","The third argument to `produce` must be a function or undefined","First argument to `createDraft` must be a plain object, an array, or an immerable object","First argument to `finishDraft` must be a draft returned by `createDraft`",function(e){return`'current' expects a draft, got: ${e}`},"Object.defineProperty() cannot be used on an Immer draft","Object.setPrototypeOf() cannot be used on an Immer draft","Immer only supports deleting array indices","Immer only supports setting array indices and the 'length' property",function(e){return`'original' expects a draft, got: ${e}`}]:[];function S(e,...t){if(process.env.NODE_ENV!=="production"){let r=Pt[e],n=typeof r=="function"?r.apply(null,t):r;throw new Error(`[Immer] ${n}`)}throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var W=Object.getPrototypeOf;function G(e){return!!e&&!!e[P]}function N(e){var t;return e?je(e)||Array.isArray(e)||!!e[Be]||!!((t=e.constructor)!=null&&t[Be])||se(e)||ae(e):!1}var kt=Object.prototype.constructor.toString();function je(e){if(!e||typeof e!="object")return!1;let t=W(e);if(t===null)return!0;let r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return r===Object?!0:typeof r=="function"&&Function.toString.call(r)===kt}function re(e,t){ie(e)===0?Reflect.ownKeys(e).forEach(r=>{t(r,e[r],e)}):e.forEach((r,n)=>t(n,r,e))}function ie(e){let t=e[P];return t?t.type_:Array.isArray(e)?1:se(e)?2:ae(e)?3:0}function ge(e,t){return ie(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function Ye(e,t,r){let n=ie(e);n===2?e.set(t,r):n===3?e.add(r):e[t]=r}function Ct(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function se(e){return e instanceof Map}function ae(e){return e instanceof Set}function I(e){return e.copy_||e.base_}function ye(e,t){if(se(e))return new Map(e);if(ae(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);let r=je(e);if(t===!0||t==="class_only"&&!r){let n=Object.getOwnPropertyDescriptors(e);delete n[P];let o=Reflect.ownKeys(n);for(let i=0;i<o.length;i++){let s=o[i],a=n[s];a.writable===!1&&(a.writable=!0,a.configurable=!0),(a.get||a.set)&&(n[s]={configurable:!0,writable:!0,enumerable:a.enumerable,value:e[s]})}return Object.create(W(e),n)}else{let n=W(e);if(n!==null&&r)return Ce({},e);let o=Object.create(n);return Object.assign(o,e)}}function xe(e,t=!1){return ce(e)||G(e)||!N(e)||(ie(e)>1&&(e.set=e.add=e.clear=e.delete=zt),Object.freeze(e),t&&Object.entries(e).forEach(([r,n])=>xe(n,!0))),e}function zt(){S(2)}function ce(e){return Object.isFrozen(e)}var Ht={};function F(e){let t=Ht[e];return t||S(0,e),t}var q;function Ke(){return q}function Ot(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function We(e,t){t&&(F("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function be(e){ve(e),e.drafts_.forEach(At),e.drafts_=null}function ve(e){e===q&&(q=e.parent_)}function Ge(e){return q=Ot(q,e)}function At(e){let t=e[P];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function Je(e,t){t.unfinalizedDrafts_=t.drafts_.length;let r=t.drafts_[0];return e!==void 0&&e!==r?(r[P].modified_&&(be(t),S(4)),N(e)&&(e=ne(t,e),t.parent_||oe(t,e)),t.patches_&&F("Patches").generateReplacementPatches_(r[P].base_,e,t.patches_,t.inversePatches_)):e=ne(t,r,[]),be(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==Xe?e:void 0}function ne(e,t,r){if(ce(t))return t;let n=t[P];if(!n)return re(t,(o,i)=>Ue(e,n,t,o,i,r)),t;if(n.scope_!==e)return t;if(!n.modified_)return oe(e,n.base_,!0),n.base_;if(!n.finalized_){n.finalized_=!0,n.scope_.unfinalizedDrafts_--;let o=n.copy_,i=o,s=!1;n.type_===3&&(i=new Set(o),o.clear(),s=!0),re(i,(a,f)=>Ue(e,n,o,a,f,r,s)),oe(e,o,!1),r&&e.patches_&&F("Patches").generatePatches_(n,r,e.patches_,e.inversePatches_)}return n.copy_}function Ue(e,t,r,n,o,i,s){if(process.env.NODE_ENV!=="production"&&o===r&&S(5),G(o)){let a=i&&t&&t.type_!==3&&!ge(t.assigned_,n)?i.concat(n):void 0,f=ne(e,o,a);if(Ye(r,n,f),G(f))e.canAutoFreeze_=!1;else return}else s&&r.add(o);if(N(o)&&!ce(o)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;ne(e,o),(!t||!t.scope_.parent_)&&typeof n!="symbol"&&Object.prototype.propertyIsEnumerable.call(r,n)&&oe(e,o)}}function oe(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&xe(t,r)}function Lt(e,t){let r=Array.isArray(e),n={type_:r?1:0,scope_:t?t.scope_:Ke(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1},o=n,i=Ee;r&&(o=[n],i=Q);let{revoke:s,proxy:a}=Proxy.revocable(o,i);return n.draft_=a,n.revoke_=s,a}var Ee={get(e,t){if(t===P)return e;let r=I(e);if(!ge(r,t))return It(e,r,t);let n=r[t];return e.finalized_||!N(n)?n:n===pe(e.base_,t)?(he(e),e.copy_[t]=_e(n,e)):n},has(e,t){return t in I(e)},ownKeys(e){return Reflect.ownKeys(I(e))},set(e,t,r){let n=Ve(I(e),t);if(n!=null&&n.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){let o=pe(I(e),t),i=o==null?void 0:o[P];if(i&&i.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if(Ct(r,o)&&(r!==void 0||ge(e.base_,t)))return!0;he(e),we(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty(e,t){return pe(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,he(e),we(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){let r=I(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:n.enumerable,value:r[t]}},defineProperty(){S(11)},getPrototypeOf(e){return W(e.base_)},setPrototypeOf(){S(12)}},Q={};re(Ee,(e,t)=>{Q[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});Q.deleteProperty=function(e,t){return process.env.NODE_ENV!=="production"&&isNaN(parseInt(t))&&S(13),Q.set.call(this,e,t,void 0)};Q.set=function(e,t,r){return process.env.NODE_ENV!=="production"&&t!=="length"&&isNaN(parseInt(t))&&S(14),Ee.set.call(this,e[0],t,r,e[0])};function pe(e,t){let r=e[P];return(r?I(r):e)[t]}function It(e,t,r){var o;let n=Ve(t,r);return n?"value"in n?n.value:(o=n.get)==null?void 0:o.call(e.draft_):void 0}function Ve(e,t){if(!(t in e))return;let r=W(e);for(;r;){let n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=W(r)}}function we(e){e.modified_||(e.modified_=!0,e.parent_&&we(e.parent_))}function he(e){e.copy_||(e.copy_=ye(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var Nt=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,r,n)=>{if(typeof t=="function"&&typeof r!="function"){let i=r;r=t;let s=this;return function(f=i,...h){return s.produce(f,l=>r.call(this,l,...h))}}typeof r!="function"&&S(6),n!==void 0&&typeof n!="function"&&S(7);let o;if(N(t)){let i=Ge(this),s=_e(t,void 0),a=!0;try{o=r(s),a=!1}finally{a?be(i):ve(i)}return We(i,n),Je(o,i)}else if(!t||typeof t!="object"){if(o=r(t),o===void 0&&(o=t),o===Xe&&(o=void 0),this.autoFreeze_&&xe(o,!0),n){let i=[],s=[];F("Patches").generateReplacementPatches_(t,o,i,s),n(i,s)}return o}else S(1,t)},this.produceWithPatches=(t,r)=>{if(typeof t=="function")return(s,...a)=>this.produceWithPatches(s,f=>t(f,...a));let n,o;return[this.produce(t,r,(s,a)=>{n=s,o=a}),n,o]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){N(e)||S(8),G(e)&&(e=Ft(e));let t=Ge(this),r=_e(e,void 0);return r[P].isManual_=!0,ve(t),r}finishDraft(e,t){let r=e&&e[P];(!r||!r.isManual_)&&S(9);let{scope_:n}=r;return We(n,t),Je(void 0,n)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){let o=t[r];if(o.path.length===0&&o.op==="replace"){e=o.value;break}}r>-1&&(t=t.slice(r+1));let n=F("Patches").applyPatches_;return G(e)?n(e,t):this.produce(e,o=>n(o,t))}};function _e(e,t){let r=se(e)?F("MapSet").proxyMap_(e,t):ae(e)?F("MapSet").proxySet_(e,t):Lt(e,t);return(t?t.scope_:Ke()).drafts_.push(r),r}function Ft(e){return G(e)||S(10,e),qe(e)}function qe(e){if(!N(e)||ce(e))return e;let t=e[P],r;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=ye(e,t.scope_.immer_.useStrictShallowCopy_)}else r=ye(e,!0);return re(r,(n,o)=>{Ye(r,n,qe(o))}),t&&(t.finalized_=!1),r}var k=new Nt,le=k.produce,Kr=k.produceWithPatches.bind(k),Vr=k.setAutoFreeze.bind(k),qr=k.setUseStrictShallowCopy.bind(k),Qr=k.applyPatches.bind(k),Zr=k.createDraft.bind(k),en=k.finishDraft.bind(k);var J=_react.createContext.call(void 0, {dragStarted:!1,setDragStarted:()=>{}});var U=_react.createContext.call(void 0, {});var Wt=(e,t)=>e.startTime-t.startTime<0||e.startTime===t.startTime&&e.endTime<t.endTime?-1:1,$=Wt;var Xt=_react.forwardRef.call(void 0, (e,t)=>{let{setEvents:r,tick:n,id:o,windowTime:i,cellWidth:s,children:a}=e,{dragStarted:f,setDragStarted:h}=_react.useContext.call(void 0, J),{onDrop:l}=_react.useContext.call(void 0, U),d=_react.useCallback.call(void 0, m=>{m.preventDefault();let b=m.target,{left:u}=b.getBoundingClientRect(),v=m.dataTransfer.getData("eventId"),g=Math.round((m.clientX-u)/s),R=s*g;r(le(C=>{let c=C.find(T=>T.id===v);if(c&&n){let T=i[0]+R*n,z=c.endTime-c.startTime,M=i[0]+z+R*n;l&&l({eventId:c.id,oldRowId:c.rowId,newRowId:e.id,startTime:T,endTime:M}),c.startTime=T,c.endTime=M,c.rowId=e.id}C.sort($)})),h(!1)},[r,n,i,s]),_=_react.useContext.call(void 0, O),D=_&&_.rowsHeight&&_.rowsHeight[o]?_.rowsHeight[o].minHeight:40;return _react2.default.createElement("div",{id:`row_${o}`,ref:t,onDragOver:m=>m.preventDefault(),onDrop:d,className:f?"row-content not-clickable":"row-content","data-index":o,style:{minHeight:D}},a)}),Qe=Xt;var Re="./grip-lines-vertical-solid-ZAJSSXEQ.svg";var Yt=({id:e,startPosition:t,width:r,top:n,props:o,setEvents:i,tick:s})=>{let{setDragStarted:a}=_react.useContext.call(void 0, J),{onResize:f,eventsResize:h}=_react.useContext.call(void 0, U),l=_react.useRef.call(void 0, 0),d=_react.useCallback.call(void 0, y=>{y.stopPropagation(),y.dataTransfer.setData("eventId",e),setTimeout(()=>a(!0),0);let p=y.target;p.style.opacity="50%"},[a]),_=_react.useCallback.call(void 0, y=>{y.stopPropagation(),a(!1);let p=y.target;p.style.opacity="100%"},[a]),D=o!=null&&o.classNames?"event "+o.classNames.join(" "):"event",[m,b]=_react.useState.call(void 0, !0),[u,v]=_react.useState.call(void 0, 0),g=_react.useRef.call(void 0, 0),[R,C]=_react.useState.call(void 0, !1),c=_react.useRef.call(void 0, null),T=_react.useCallback.call(void 0, y=>{let p=y.clientX-l.current;v(c.current==="left"?p*-1:p),g.current=p},[v]),z=_react.useCallback.call(void 0, (y,p)=>{l.current=0,C(!1),document.removeEventListener("mousemove",T);let E=document.getElementById("lock-cursor");E&&E.remove(),i(le(x=>{let w=x.find(H=>H.id===e);if(w&&s){if(p==="left"){let H=Math.round(w.startTime+g.current*s);w.startTime=H}else{let H=Math.round(w.endTime+g.current*s);w.endTime=H}f&&f({eventId:w.id,startTime:w.startTime,endTime:w.endTime})}x.sort($),g.current=0,v(0)}))},[T,i,s,v,$]),M=_react.useCallback.call(void 0, (y,p)=>{y.stopPropagation(),c.current=p,C(!0);let E=document.createElement("style");E.id="lock-cursor",E.innerHTML="* { cursor: e-resize !important; }",document.head.appendChild(E),document.addEventListener("mousemove",T),document.addEventListener("mouseup",x=>z(x,p),{once:!0}),l.current=y.clientX},[T,z]),K=_react.useCallback.call(void 0, y=>{R||y.stopPropagation()},[R]);return _react2.default.createElement("div",{id:`event_${e}`,key:`event_${e}`,className:D,draggable:o!=null&&o.isLocked?!1:m,onDragStart:d,onDragEnd:_,onMouseDown:y=>y.stopPropagation(),onMouseMove:K,onDrop:y=>y.stopPropagation(),style:{left:c.current==="left"?t-u:t,width:r+u,top:n,cursor:o!=null&&o.isLocked?"not-allowed":"pointer"}},_react2.default.createElement("div",{className:"event-content"},!(o!=null&&o.isLocked)&&(h||(o==null?void 0:o.isResizable))&&_react2.default.createElement("img",{className:"event-resize",style:R?{opacity:"100%"}:void 0,src:Re,alt:"resize-icon",draggable:!1,onMouseEnter:()=>b(!1),onMouseLeave:()=>b(!0),onMouseDown:y=>M(y,"left")}),o!=null&&o.content?o.content:null,!(o!=null&&o.isLocked)&&(h||(o==null?void 0:o.isResizable))&&_react2.default.createElement("img",{className:"event-resize",style:R?{opacity:"100%"}:void 0,src:Re,alt:"resize-icon",draggable:!1,onMouseEnter:()=>b(!1),onMouseLeave:()=>b(!0),onMouseDown:y=>M(y,"right")})))},et=Yt;var qt=({bodyRef:e,rowsContentRef:t})=>{let r=_react.useCallback.call(void 0, o=>{o.forEach(i=>{i.isIntersecting?i.target.classList.remove("row-hidden"):i.target.classList.add("row-hidden")})},[]),n=new IntersectionObserver(r,{root:e.current});_react.useEffect.call(void 0, ()=>(t.current&&t.current.forEach(o=>{n.observe(o)}),()=>n.disconnect()),[n])},tt=qt;var tr=({rows:e,windowTime:t,tick:r,events:n,staticEvents:o,cellWidth:i,setEvents:s,bodyRef:a})=>{let f=_react.useContext.call(void 0, O),h=_react.useRef.call(void 0, null),l=_react.useRef.call(void 0, []),[d,_]=_react.useMemo.call(void 0, ()=>{let D=0;return[e.map((m,b)=>{let u=0,v=[],g=0,R=r?n.filter(c=>c.rowId===m.id).map(c=>{if(c.endTime>=t[0]&&c.startTime<=t[1]){let T=0,z=!0;for(let M=0;M<=u;M++)if(v&&v[M]&&v[M].endTime>c.startTime)T+=1;else{u>g&&(g=u),u=0,z=!1;break}return z&&(u=T),v[T]=c,_react2.default.createElement(et,{key:`event_${c.id}`,id:c.id,startPosition:(c.startTime-t[0])/r,width:(c.endTime-c.startTime)/r,top:10+22*T,props:c.props,setEvents:s,tick:r})}}):null;u>g&&(g=u),h.current===null?h.current={[m.id]:{minHeight:40+g*22}}:h.current[m.id]={minHeight:40+g*22},D+=40+g*22;let C=r&&o?o.filter(c=>c.rowId===m.id).map(c=>{if(c.endTime>=t[0]&&c.startTime<=t[1])return _react2.default.createElement($e,{key:`static_event_${c.id}`,id:c.id,startPosition:(c.startTime-t[0])/r,width:(c.endTime-c.startTime)/r,top:10,height:20+g*22})}):null;return _react2.default.createElement(_react2.default.Fragment,{key:`row_content_${m.id}`},_react2.default.createElement(Qe,{id:m.id,ref:c=>{l.current&&l.current[b]&&c?l.current[b]=c:l.current&&c&&l.current.push(c)},setEvents:s,tick:r,windowTime:t,cellWidth:i},R,C))}),D]},[e,n,r,t,i]);return tt({rowsContentRef:l,bodyRef:a}),_react.useEffect.call(void 0, ()=>{f&&(f.setRowsHeight(h.current),f.setAllRowsHeight(_))},[d,_]),d},nt=tr;var sr=_react.forwardRef.call(void 0, ({rows:e,events:t,staticEvents:r,setEvents:n,tick:o,windowTime:i,cellWidth:s,setWindowTime:a,contentWidth:f,setCellWidth:h,bodyRef:l,lineClassName:d},_)=>{let[D,m]=_react.useState.call(void 0, !1),b=_react.useRef.call(void 0, null),[u,v]=_react.useState.call(void 0, !1),{blockWidth:g}=te({windowTime:i,contentWidth:f}),R=_react.useContext.call(void 0, O),C=_react.useCallback.call(void 0, p=>{if(p.preventDefault(),!D)return;let E=p.target,{left:x}=E.getBoundingClientRect(),w=p.clientX-x,H=o?Math.floor(o*g):0;b.current&&b.current-w>=g?(b.current=w,a(V=>[V[0]+H,V[1]+H])):b.current&&w-b.current>=g&&(b.current=w,a(V=>[V[0]-H,V[1]-H]))},[g,a,D]),c=_react.useCallback.call(void 0, p=>{m(!0),p.button===1&&p.preventDefault();let E=p.target,{left:x}=E.getBoundingClientRect();b.current=p.clientX-x},[m]),T=_react.useCallback.call(void 0, ()=>{m(!1)},[m]),z=_react.useCallback.call(void 0, ()=>m(!1),[m]),M=nt({rows:e,windowTime:i,tick:o,events:t,staticEvents:r,cellWidth:s,setEvents:n,bodyRef:l}),K=_react.useCallback.call(void 0, p=>{p.preventDefault(),p.button===1&&v(E=>!E)},[]),y=_react.useCallback.call(void 0, p=>{let E=o?900/o:0;u&&h(x=>{let w=p.deltaY>0?x+E:x-E;return w<E||w>E*12?x:w})},[u,s,o]);return _react.useEffect.call(void 0, ()=>{l.current&&(l.current.style.overflow=u?"hidden":"auto")},[u]),_react2.default.createElement("div",{key:"content",ref:_,className:"content-wrapper",onMouseDown:c,onMouseUp:T,onMouseMove:C,onMouseLeave:z,onAuxClick:K,onWheel:y,style:{cursor:D?"grabbing":"grab",height:R==null?void 0:R.allRowsHeight}},_react2.default.createElement(Fe,{contentWidth:f,cellWidth:s,lineClassName:d}),M)}),st=sr;var ur=({windowTime:e,setTick:t,setCellWidth:r,contentRef:n})=>{let o=_react.useRef.call(void 0, 0),i=_react.useMemo.call(void 0, ()=>new ResizeObserver(s=>{var a;for(let f of s){let h=(a=f.borderBoxSize)==null?void 0:a[0].inlineSize;if(typeof h=="number"&&h!==o.current){o.current=h;let l=e[1]-e[0],d=l/3600;t(l/f.contentRect.width),r(f.contentRect.width/d)}}}),[e]);_react.useEffect.call(void 0, ()=>(n.current&&i.observe(n.current,{box:"border-box"}),()=>i.disconnect()),[i])},at=ur;var mr=({tick:e,windowTime:t})=>{let[r,n]=_react.useState.call(void 0, new Date().getTime()/1e3),[o,i]=_react.useState.call(void 0, 0),s=_react.useRef.call(void 0, null);return _react.useEffect.call(void 0, ()=>{if(e){let a=r-t[0];i(Math.round(a/e)),s.current!==null&&clearInterval(s.current);let f=setInterval(()=>{n(new Date().getTime()/1e3)},e*1e3);s.current=f}},[e,t,r]),_react2.default.createElement(_react2.default.Fragment,null,t[0]<=r&&r<=t[1]&&_react2.default.createElement(_react2.default.Fragment,null,_react2.default.createElement("div",{className:"rt-arrow",style:{left:86+o}}),_react2.default.createElement("div",{className:"rt-line",style:{left:100+o}})))},lt=mr;var ao=({rows:e,events:t,staticEvents:r,onDrop:n,onResize:o,startDate:i,endDate:s,additionalClassNames:a,showRTIndicator:f=!0,eventsResize:h=!0})=>{let[l,d]=_react.useState.call(void 0, [new Date(i.getFullYear(),i.getMonth(),i.getDate(),i.getHours(),0,0).getTime()/1e3,new Date(s.getFullYear(),s.getMonth(),s.getDate(),s.getHours(),0,0).getTime()/1e3]),[_,D]=_react.useState.call(void 0, 0),[m,b]=_react.useState.call(void 0, []),u=_react.useRef.call(void 0, null),v=_react.useRef.call(void 0, null),g=_react.useRef.call(void 0, null),[R,C]=_react.useState.call(void 0, null),[c,T]=_react.useState.call(void 0, 0),[z,M]=_react.useState.call(void 0, null),[K,y]=_react.useState.call(void 0, 0);_react.useEffect.call(void 0, ()=>{if(u.current){let x=l[1]-l[0],w=x/3600;C(x/u.current.getBoundingClientRect().width),D(u.current.getBoundingClientRect().width/w)}},[]),_react.useEffect.call(void 0, ()=>{g.current&&T(g.current.getBoundingClientRect().width-g.current.scrollWidth)},[]),_react.useEffect.call(void 0, ()=>{b(t.sort($))},[t]);let[p,E]=_react.useState.call(void 0, !1);return _react.useEffect.call(void 0, ()=>{let x=null;e.forEach(w=>{x===null?x={[w.id]:{minHeight:40}}:x[w.id]={minHeight:40}}),M(x)},[e]),at({contentRef:u,setCellWidth:D,setTick:C,windowTime:l}),_react2.default.createElement("div",{className:"main-wrapper",ref:v},f&&_react2.default.createElement(lt,{tick:R,windowTime:l}),_react2.default.createElement(He,{windowTime:l,tick:R,contentWidth:u.current?u.current.getBoundingClientRect().width:null,scrollWidth:c}),_react2.default.createElement("div",{className:"body-wrapper",ref:g},_react2.default.createElement(O.Provider,{value:{rowsHeight:z,setRowsHeight:M,allRowsHeight:K,setAllRowsHeight:y}},_react2.default.createElement(Le,{rows:e,className:a==null?void 0:a.rowsHeader}),_react2.default.createElement(J.Provider,{value:{dragStarted:p,setDragStarted:E}},_react2.default.createElement(U.Provider,{value:{onDrop:n,onResize:o,eventsResize:h}},_react2.default.createElement(st,{events:m,staticEvents:r,rows:e,setEvents:b,tick:R,windowTime:l,cellWidth:_,setWindowTime:d,ref:u,setCellWidth:D,contentWidth:u.current?u.current.getBoundingClientRect().width:null,bodyRef:g,lineClassName:a==null?void 0:a.gridLine}))))))};exports.Timeline = ao;
//# sourceMappingURL=index.js.map